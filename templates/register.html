{% extends "base.html" %}

{% block title %}Register{% endblock %}

{% block content %}
    <h1>Register</h1>
    <form id="register-form" action="{{ url_for('register') }}" method="post">
        <!-- Register form fields -->
        {{ form.hidden_tag() }}
        {{ form.username.label }} {{ form.username(size=20) }}
        {{ form.email.label }} {{ form.email(size=20) }}
        {{ form.password.label }} {{ form.password(size=20) }}
        {{ form.first_name.label }} {{ form.first_name(size=20) }}
        {{ form.last_name.label }} {{ form.last_name(size=20) }}
        {{ form.user_role.label }} {{ form.user_role(id="user_role") }}
        <div id="license_type" style="display: none;">
            {{ form.license_type.label }} {{ form.license_type() }}
        </div>
        <div id="company_name" style="display: none;">
            {{ form.company_name.label }} {{ form.company_name(size=20) }}
        </div>
        <button type="submit">Register</button>
    </form>

    <button id="switch-form">Switch to Login</button>

    <script>
        document.getElementById("switch-form").addEventListener("click", function () {
            window.location.href = "{{ url_for('login') }}";
        });

        document.getElementById("register-form").addEventListener("change", function () {
            const userRoleSelect = document.getElementById("user_role");
            const licenseTypeField = document.getElementById("license_type");
            const companyNameField = document.getElementById("company_name");

            if (userRoleSelect.value === "driver") {
                licenseTypeField.style.display = "block";
                companyNameField.style.display = "none";
            } else if (userRoleSelect.value === "client") {
                companyNameField.style.display = "block";
                licenseTypeField.style.display = "none";
            } else {
                licenseTypeField.style.display = "none";
                companyNameField.style.display = "none";
            }
        });
    </script>
{% endblock %}
